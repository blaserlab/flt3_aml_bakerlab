# BMX Kinase Mediates Gilteritinib Resistance in FLT3-mutated AML through Microenvironmental Factors

This is an analysis project. It requires a processed R data package to be used.  This is available at https://figshare.com/articles/dataset/Untitled_Item/23535606.  Download this .tar.gz file and install on your system like any other R package.  Together, this analysis project and the data package will reproduce all R-generated figures from the manuscript.

After cloning this project on your system, open R/dependencies.R. If you are using the blaseRtemplates environment, edit the argument to the project_data() command to point to the directory where the flt3.aml.datapkg tar.gz file is stored.  Otherwise, comment out these lines and uncomment the last three commands to load the data using the standard R data functions.

Once everything is properly installed, you should restart the R session and source R/dependencies.R. If it sources without errors, then source R/configs.R. This has required aesthetic, output and other information for the files. You should edit the output section at the bottom, or copy to local_configs.R and then edit.

* Individual figure panels can be recreated running the code in R/figs/fig_staging.R
* Full figures can be generated by running the code in R/figs/fig_*_composition.R
* Tables and summary stats can be generated by sourcing R/tables/supplemental_tables.R

If you want to inspect the code used to generate the data package, it will be installed in your package library in the directory, flt3.aml.datapkg/data-raw.  Each data object has an associated manual page which can be accessed by clicking on "flt3.aml.datapkg" in the packages panel of RStudio.  

## System Requirements

-   [R v4.3.0](https://www.r-project.org/)
-   This software has been tested on Linux Ubuntu 18.04.6 and Windows 10
-   Loading the complete dataset occupies close to 8 GB memory.


## Demo

Recreate Figure 2A from the paper using the Rstudio ide:

* source R/dependencies.R
* source R/configs.R
* source R/figs/fig_staging.R
* run ```umap_partition``` in the console
* Expected output:  a umap plot.
* Expected runtime:  seconds

## Instructions for use

After installing and configuring:

-   source R/dependencies.R
-   source R/configs.R
-   source R/figs/fig_staging.R. This will generate all computationally-derived figures in the manuscript.
-   source R/supplemental_tables.R. This will generate all supplementary tables in the manuscript.

If properly configured, these scripts should run to completion in 1-2 minutes.

